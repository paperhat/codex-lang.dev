<Schema
	authoringMode=$SimplifiedMode
	compatibilityClass=$Initial
	description="The authoritative schema for schema-validating Codex schema documents."
	id=urn:codex:bootstrap:1.0.0
	title="Codex Bootstrap Schema-of-Schemas"
	version="1.0.0"
	versionScheme=$Semver
>
	<EnumeratedValueSets>
		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ConceptKind
			key=~conceptKind
			name="ConceptKind"
		>
			<Member
				description="A concept with domain meaning."
				label="Semantic"
				value="Semantic"
			/>
			<Member
				description="A concept that organizes structure."
				label="Structural"
				value="Structural"
			/>
			<Member
				description="A concept that behaves like a value."
				label="Value-like"
				value="ValueLike"
			/>
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:EntityEligibility
			key=~entityEligibility
			name="EntityEligibility"
		>
			<Member
				description="Instances must declare an id."
				label="Must be Entity"
				value="MustBeEntity"
			/>
			<Member
				description="Instances must not declare an id."
				label="Must not be Entity"
				value="MustNotBeEntity"
			/>
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:CompatibilityClass
			key=~compatibilityClass
			name="CompatibilityClass"
		>
			<Member description="First version in schema lineage." label="Initial" value="Initial" />
			<Member label="Backward Compatible" value="BackwardCompatible" />
			<Member label="Forward Compatible" value="ForwardCompatible" />
			<Member label="Breaking" value="Breaking" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:VersionScheme
			key=~versionScheme
			name="VersionScheme"
		>
			<Member description="MAJOR.MINOR.PATCH format." label="Semantic Versioning" value="Semver" />
			<Member description="Year-month format." label="Date (YYYY-MM)" value="DateYYYYMM" />
			<Member description="Year-month-day format." label="Date (YYYY-MM-DD)" value="DateYYYYMMDD" />
			<Member description="Unicode codepoint ordering." label="Lexical" value="Lexical" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:AuthoringMode
			key=~authoringMode
			name="AuthoringMode"
		>
			<Member
				description="Codex-native schema-definition authoring surface only."
				label="Simplified Authoring Mode"
				value="SimplifiedMode"
			/>
			<Member
				description="Canonical Representation authoring only."
				label="Canonical Authoring Mode"
				value="CanonicalMode"
			/>
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:WhitespaceMode
			key=~whitespaceMode
			name="WhitespaceMode"
		>
			<Member description="Content whitespace is significant and preserved exactly." label="Preformatted" value="Preformatted" />
			<Member description="Content whitespace is collapsed and trimmed." label="Flow" value="Flow" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:Ordering
			key=~ordering
			name="Ordering"
		>
			<Member label="Ordered" value="Ordered" />
			<Member label="Unordered" value="Unordered" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:Cardinality
			key=~cardinality
			name="Cardinality"
		>
			<Member description="Trait accepts a single value." label="Single" value="Single" />
			<Member description="Trait accepts a list of values." label="List" value="List" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ValueType
			key=~valueType
			name="ValueType"
		>
			[Scalar types]
			<Member value="Text" />
			<Member value="Character" />
			<Member value="Boolean" />

			[Numeric types (per spec A.1.12)]
			<Member description="Any numeric value." value="Number" />
			<Member value="Integer" />
			<Member description="Number with decimal point." value="DecimalNumber" />
			<Member description="Number with exponent." value="ExponentialNumber" />
			<Member description="Decimal with explicit precision." value="PrecisionNumber" />
			<Member description="Rational number." value="Fraction" />
			<Member description="Pure imaginary." value="ImaginaryNumber" />
			<Member description="Real + imaginary." value="ComplexNumber" />
			<Member description="Infinity." value="PositiveInfinity" />
			<Member description="-Infinity." value="NegativeInfinity" />
			<Member description="PositiveInfinity or NegativeInfinity." value="Infinity" />
			<Member description="The integer zero." value="Zero" />
			<Member description="An integer < 0." value="NegativeInteger" />
			<Member description="An integer <= 0." value="NonPositiveInteger" />
			<Member description="An integer >= 0." value="NonNegativeInteger" />
			<Member description="An integer >= 1." value="PositiveInteger" />

			[Temporal types (per spec A.1.14)]
			<Member description="Any temporal value." value="Temporal" />
			<Member description="Date, time, and timezone." value="ZonedDateTime" />
			<Member description="Absolute point in time with offset." value="Instant" />
			<Member description="Date and time." value="PlainDateTime" />
			<Member description="Calendar date." value="PlainDate" />
			<Member description="ISO year and week." value="YearWeek" />
			<Member description="Year and month." value="PlainYearMonth" />
			<Member description="Month and day." value="PlainMonthDay" />
			<Member description="Wall-clock time." value="PlainTime" />
			<Member description="Length of time." value="Duration" />
			<Member description="now or today." value="TemporalKeyword" />

			[Identity types]
			<Member value="EnumeratedToken" />
			<Member value="IriReference" />
			<Member value="LookupToken" />
			<Member value="Uuid" />
			<Member description="Host name wrapper value (canonicalized)." value="HostName" />
			<Member description="Email address wrapper value (canonicalized)." value="EmailAddress" />
			<Member description="URL wrapper value (canonicalized)." value="Url" />

			[Color types (per spec ยง5.7)]
			<Member description="Any color value." value="Color" />
			<Member description="Hexadecimal color (#RGB, #RRGGBB, etc.)." value="HexColor" />
			<Member description="Named color (&red, &blue, etc.)." value="NamedColor" />
			<Member description="RGB color function." value="RgbColor" />
			<Member description="HSL color function." value="HslColor" />
			<Member description="HWB color function." value="HwbColor" />
			<Member description="CIE Lab color function." value="LabColor" />
			<Member description="CIE LCH color function." value="LchColor" />
			<Member description="Oklab color function." value="OklabColor" />
			<Member description="Oklch color function." value="OklchColor" />
			<Member description="Generic color() function." value="ColorFunction" />
			<Member description="color-mix() function." value="ColorMix" />
			<Member description="device-cmyk() function." value="DeviceCmyk" />

			[Collection types]
			<Member value="List" />
			<Member value="Set" />
			<Member value="Map" />
			<Member value="Record" />
			<Member value="Tuple" />
			<Member value="Range" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ChildConstraintType
			key=~childConstraintType
			name="ChildConstraintType"
		>
			<Member value="RequiresChildConcept" />
			<Member value="AllowsChildConcept" />
			<Member value="ForbidsChildConcept" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ReferenceConstraintType
			key=~referenceConstraintType
			name="ReferenceConstraintType"
		>
			<Member value="ReferenceTargetsEntity" />
			<Member value="ReferenceMustResolve" />
			<Member value="ReferenceTargetsConcept" />
			<Member value="ReferenceSingleton" />
			<Member value="ReferenceTraitAllowed" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:IdentityConstraintType
			key=~identityConstraintType
			name="IdentityConstraintType"
		>
			<Member value="MustBeEntity" />
			<Member value="MustNotBeEntity" />
			<Member value="IdentifierUniqueness" />
			<Member value="IdentifierForm" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ContextConstraintType
			key=~contextConstraintType
			name="ContextConstraintType"
		>
			<Member value="OnlyValidUnderParent" />
			<Member value="OnlyValidUnderContext" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:ContentConstraintType
			key=~contentConstraintType
			name="ContentConstraintType"
		>
			<Member value="ForbidsContent" />
			<Member value="ContentRequired" />
			<Member value="ContentMatchesPattern" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:TraitPriority
			key=~traitPriority
			name="TraitPriority"
		>
			<Member value="Primary" />
			<Member value="Secondary" />
		</EnumeratedValueSet>

		<EnumeratedValueSet
			id=urn:codex:bootstrap:enum:OrderConstraintType
			key=~orderConstraintType
			name="OrderConstraintType"
		>
			<Member
				description="Elements must be in ascending order by the specified trait."
				label="Ascending"
				value="Ascending"
			/>
			<Member
				description="Elements must be in descending order by the specified trait."
				label="Descending"
				value="Descending"
			/>
		</EnumeratedValueSet>
	</EnumeratedValueSets>

	<ConceptDefinitions>

		[GROUP: Root Schema Concept]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:Schema
			key=~schema
			name="Schema"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="version" />
				<RequiresTrait name="versionScheme" />
				<RequiresTrait name="compatibilityClass" />
				<RequiresTrait name="authoringMode" />
				<AllowsTrait name="title" />
				<AllowsTrait name="description" />
				<AllowsTrait name="key" />
			</TraitRules>
			<ChildRules>
				<AllowsChildConcept conceptSelector="ConceptDefinitions" max=1 />
				<AllowsChildConcept conceptSelector="TraitDefinitions" max=1 />
				<AllowsChildConcept conceptSelector="EnumeratedValueSets" max=1 />
				<AllowsChildConcept conceptSelector="ConstraintDefinitions" max=1 />
				<AllowsChildConcept conceptSelector="ValidatorDefinitions" max=1 />
				<AllowsChildConcept conceptSelector="ValueTypeDefinitions" max=1 />
				<AllowsChildConcept conceptSelector="RdfGraph" max=1 />
			</ChildRules>
		</ConceptDefinition>

		[END: Root Schema Concept]

		[GROUP: Definition Containers]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ConceptDefinitions
			key=~conceptDefinitions
			name="ConceptDefinitions"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="ConceptDefinition" />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitDefinitions
			key=~traitDefinitions
			name="TraitDefinitions"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="TraitDefinition" />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:EnumeratedValueSets
			key=~enumeratedValueSets
			name="EnumeratedValueSets"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="EnumeratedValueSet" min=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ConstraintDefinitions
			key=~constraintDefinitions
			name="ConstraintDefinitions"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="ConstraintDefinition" min=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValidatorDefinitions
			key=~validatorDefinitions
			name="ValidatorDefinitions"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="ValidatorDefinition" min=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueTypeDefinitions
			key=~valueTypeDefinitions
			name="ValueTypeDefinitions"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="ValueTypeDefinition" min=1 />
			</ChildRules>
		</ConceptDefinition>

		[END: Definition Containers]

		[GROUP: Concept Definition]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:ConceptDefinition
			key=~conceptDefinition
			name="ConceptDefinition"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="name" />
				<RequiresTrait name="conceptKind" />
				<RequiresTrait name="entityEligibility" />
				<AllowsTrait name="key" />
				<AllowsTrait name="description" />
				<AllowsTrait name="role" />
			</TraitRules>
			<ChildRules>
				<AllowsChildConcept conceptSelector="ContentRules" max=1 />
				<AllowsChildConcept conceptSelector="TraitRules" max=1 />
				<AllowsChildConcept conceptSelector="ChildRules" max=1 />
				<AllowsChildConcept conceptSelector="CollectionRules" max=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ContentRules
			key=~contentRules
			name="ContentRules"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="AllowsContent" />
					<ConceptOption conceptSelector="ForbidsContent" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AllowsContent
			key=~allowsContent
			name="AllowsContent"
		>
			<TraitRules>
				<RequiresTrait name="whitespaceMode" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ForbidsContent
			key=~forbidsContent
			name="ForbidsContent"
		/>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitRules
			key=~traitRules
			name="TraitRules"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="RequiresTrait" />
				<AllowsChildConcept conceptSelector="AllowsTrait" />
				<AllowsChildConcept conceptSelector="ForbidsTrait" />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:RequiresTrait
			key=~requiresTrait
			name="RequiresTrait"
		>
			<TraitRules>
				<RequiresTrait name="name" />
			</TraitRules>
			<ChildRules>
				<AllowsChildConcept conceptSelector="AllowedValues" max=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AllowsTrait
			key=~allowsTrait
			name="AllowsTrait"
		>
			<TraitRules>
				<RequiresTrait name="name" />
			</TraitRules>
			<ChildRules>
				<AllowsChildConcept conceptSelector="AllowedValues" max=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ForbidsTrait
			key=~forbidsTrait
			name="ForbidsTrait"
		>
			<TraitRules>
				<RequiresTrait name="name" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ChildRules
			key=~childRules
			name="ChildRules"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="AllowsChildConcept" />
				<AllowsChildConcept conceptSelector="RequiresChildConcept" />
				<AllowsChildConcept conceptSelector="ForbidsChildConcept" />
				<AllowsChildConcept conceptSelector="ExactlyOneChildOf" />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AllowsChildConcept
			key=~allowsChildConcept
			name="AllowsChildConcept"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:RequiresChildConcept
			key=~requiresChildConcept
			name="RequiresChildConcept"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ForbidsChildConcept
			key=~forbidsChildConcept
			name="ForbidsChildConcept"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ExactlyOneChildOf
			key=~exactlyOneChildOf
			name="ExactlyOneChildOf"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="ConceptOption" min=2 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ConceptOption
			key=~conceptOption
			name="ConceptOption"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:CollectionRules
			key=~collectionRules
			name="CollectionRules"
		>
			<TraitRules>
				<RequiresTrait name="ordering" />
				<RequiresTrait name="allowsDuplicates" />
			</TraitRules>
		</ConceptDefinition>

		[END: Concept Definition]

		[GROUP: Trait Definition]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:TraitDefinition
			key=~traitDefinition
			name="TraitDefinition"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="name" />
				<AllowsTrait name="defaultValueType" />
				<AllowsTrait name="defaultValueTypes" />
				<AllowsTrait name="isReferenceTrait" />
				<AllowsTrait name="priority" />
				<AllowsTrait name="description" />
			</TraitRules>
			<ChildRules>
				<AllowsChildConcept conceptSelector="AllowedValues" max=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AllowedValues
			key=~allowedValues
			name="AllowedValues"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ValueIsOneOf" />
					<ConceptOption conceptSelector="EnumeratedConstraint" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		[END: Trait Definition]

		[GROUP: Enumerated Value Sets]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:EnumeratedValueSet
			key=~enumeratedValueSet
			name="EnumeratedValueSet"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="name" />
				<AllowsTrait name="key" />
				<AllowsTrait name="description" />
			</TraitRules>
			<ChildRules>
				<RequiresChildConcept conceptSelector="Member" min=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$ValueLike
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:Member
			key=~member
			name="Member"
		>
			<TraitRules>
				<RequiresTrait name="value" />
				<AllowsTrait name="label" />
				<AllowsTrait name="description" />
			</TraitRules>
		</ConceptDefinition>

		[END: Enumerated Value Sets]

		[GROUP: Value Type Definition]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:ValueTypeDefinition
			key=~valueTypeDefinition
			name="ValueTypeDefinition"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="name" />
				<RequiresTrait name="baseValueType" />
				<AllowsTrait name="validatorName" />
			</TraitRules>
		</ConceptDefinition>

		[END: Value Type Definition]

		[GROUP: Validator Definitions]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:ValidatorDefinition
			key=~validatorDefinition
			name="ValidatorDefinition"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<RequiresTrait name="name" />
				<AllowsTrait name="message" />
			</TraitRules>
			<ContentRules>
				<AllowsContent whitespaceMode=$Preformatted />
			</ContentRules>
		</ConceptDefinition>

		[END: Validator Definitions]

		[GROUP: Constraint Definitions]

		<ConceptDefinition
			conceptKind=$Semantic
			entityEligibility=$MustBeEntity
			id=urn:codex:bootstrap:concept:ConstraintDefinition
			key=~constraintDefinition
			name="ConstraintDefinition"
		>
			<TraitRules>
				<RequiresTrait name="id" />
				<AllowsTrait name="title" />
				<AllowsTrait name="description" />
			</TraitRules>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="Targets"
					max=1
					min=1
				/>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:Targets
			key=~targets
			name="Targets"
		>
			<ChildRules>
				<AllowsChildConcept conceptSelector="TargetConcept" />
				<AllowsChildConcept conceptSelector="TargetContext" />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TargetConcept
			key=~targetConcept
			name="TargetConcept"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TargetContext
			key=~targetContext
			name="TargetContext"
		>
			<TraitRules>
				<RequiresTrait name="contextSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:Rule
			key=~rule
			name="Rule"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="AllOf" />
					<ConceptOption conceptSelector="AnyOf" />
					<ConceptOption conceptSelector="Not" />
					<ConceptOption conceptSelector="ConditionalConstraint" />
					<ConceptOption conceptSelector="OnPathExists" />
					<ConceptOption conceptSelector="OnPathForAll" />
					<ConceptOption conceptSelector="OnPathCount" />
					<ConceptOption conceptSelector="TraitExists" />
					<ConceptOption conceptSelector="TraitMissing" />
					<ConceptOption conceptSelector="TraitEquals" />
					<ConceptOption conceptSelector="TraitCardinality" />
					<ConceptOption conceptSelector="TraitValueType" />
					<ConceptOption conceptSelector="ValueIsOneOf" />
					<ConceptOption conceptSelector="ValueMatchesPattern" />
					<ConceptOption conceptSelector="PatternConstraint" />
					<ConceptOption conceptSelector="ValueLength" />
					<ConceptOption conceptSelector="ValueInNumericRange" />
					<ConceptOption conceptSelector="ValueIsNonEmpty" />
					<ConceptOption conceptSelector="ValueIsValid" />
					<ConceptOption conceptSelector="ChildConstraint" />
					<ConceptOption conceptSelector="ChildSatisfies" />
					<ConceptOption conceptSelector="CollectionOrdering" />
					<ConceptOption conceptSelector="CollectionAllowsEmpty" />
					<ConceptOption conceptSelector="CollectionAllowsDuplicates" />
					<ConceptOption conceptSelector="MemberCount" />
					<ConceptOption conceptSelector="EachMemberSatisfies" />
					<ConceptOption conceptSelector="UniqueConstraint" />
					<ConceptOption conceptSelector="OrderConstraint" />
					<ConceptOption conceptSelector="ReferenceConstraint" />
					<ConceptOption conceptSelector="IdentityConstraint" />
					<ConceptOption conceptSelector="ContextConstraint" />
					<ConceptOption conceptSelector="ContentConstraint" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		[END: Constraint Definitions]

		[GROUP: Rule Algebra]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AllOf
			key=~allOf
			name="AllOf"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="Rule" min=2 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:AnyOf
			key=~anyOf
			name="AnyOf"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="Rule" min=2 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:Not
			key=~not
			name="Not"
		>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ConditionalConstraint
			key=~conditionalConstraint
			name="ConditionalConstraint"
		>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="When"
					max=1
					min=1
				/>
				<RequiresChildConcept
					conceptSelector="Then"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:When
			key=~when
			name="When"
		>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:Then
			key=~then
			name="Then"
		>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		[END: Rule Algebra]

		[GROUP: Paths]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitPath
			key=~traitPath
			name="TraitPath"
		>
			<TraitRules>
				<RequiresTrait name="traitName" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ChildPath
			key=~childPath
			name="ChildPath"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:DescendantPath
			key=~descendantPath
			name="DescendantPath"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ContentPath
			key=~contentPath
			name="ContentPath"
		/>

		[END: Paths]

		[GROUP: Path-Scoped Rules]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:OnPathExists
			key=~onPathExists
			name="OnPathExists"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="TraitPath" />
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
					<ConceptOption conceptSelector="ContentPath" />
				</ExactlyOneChildOf>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:OnPathForAll
			key=~onPathForAll
			name="OnPathForAll"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="TraitPath" />
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
					<ConceptOption conceptSelector="ContentPath" />
				</ExactlyOneChildOf>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:OnPathCount
			key=~onPathCount
			name="OnPathCount"
		>
			<TraitRules>
				<AllowsTrait name="minCount" />
				<AllowsTrait name="maxCount" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="TraitPath" />
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
					<ConceptOption conceptSelector="ContentPath" />
				</ExactlyOneChildOf>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		[END: Path-Scoped Rules]

		[GROUP: Atomic Constraints - Trait]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitExists
			key=~traitExists
			name="TraitExists"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitMissing
			key=~traitMissing
			name="TraitMissing"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitEquals
			key=~traitEquals
			name="TraitEquals"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
				<RequiresTrait name="value" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitCardinality
			key=~traitCardinality
			name="TraitCardinality"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:TraitValueType
			key=~traitValueType
			name="TraitValueType"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
				<RequiresTrait name="valueType" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Trait]

		[GROUP: Atomic Constraints - Value]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueIsOneOf
			key=~valueIsOneOf
			name="ValueIsOneOf"
		>
			<TraitRules>
				<RequiresTrait name="values" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:EnumeratedConstraint
			key=~enumeratedConstraint
			name="EnumeratedConstraint"
		>
			<TraitRules>
				<RequiresTrait name="set" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueMatchesPattern
			key=~valueMatchesPattern
			name="ValueMatchesPattern"
		>
			<TraitRules>
				<RequiresTrait name="pattern" />
				<AllowsTrait name="flags" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:PatternConstraint
			key=~patternConstraint
			name="PatternConstraint"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
				<RequiresTrait name="pattern" />
				<AllowsTrait name="flags" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueLength
			key=~valueLength
			name="ValueLength"
		>
			<TraitRules>
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueInNumericRange
			key=~valueInNumericRange
			name="ValueInNumericRange"
		>
			<TraitRules>
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueIsNonEmpty
			key=~valueIsNonEmpty
			name="ValueIsNonEmpty"
		/>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ValueIsValid
			key=~valueIsValid
			name="ValueIsValid"
		>
			<TraitRules>
				<RequiresTrait name="validatorName" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Value]

		[GROUP: Atomic Constraints - Child]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ChildConstraint
			key=~childConstraint
			name="ChildConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~childConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ChildSatisfies
			key=~childSatisfies
			name="ChildSatisfies"
		>
			<TraitRules>
				<RequiresTrait name="conceptSelector" />
			</TraitRules>
			<ChildRules>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Child]

		[GROUP: Atomic Constraints - Collection]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:CollectionOrdering
			key=~collectionOrdering
			name="CollectionOrdering"
		>
			<TraitRules>
				<RequiresTrait name="ordering" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:CollectionAllowsEmpty
			key=~collectionAllowsEmpty
			name="CollectionAllowsEmpty"
		>
			<TraitRules>
				<RequiresTrait name="allowed" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:CollectionAllowsDuplicates
			key=~collectionAllowsDuplicates
			name="CollectionAllowsDuplicates"
		>
			<TraitRules>
				<RequiresTrait name="allowed" />
				<AllowsTrait name="keyTrait" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:MemberCount
			key=~memberCount
			name="MemberCount"
		>
			<TraitRules>
				<AllowsTrait name="min" />
				<AllowsTrait name="max" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:EachMemberSatisfies
			key=~eachMemberSatisfies
			name="EachMemberSatisfies"
		>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
				<RequiresChildConcept
					conceptSelector="Rule"
					max=1
					min=1
				/>
			</ChildRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Collection]

		[GROUP: Atomic Constraints - Uniqueness and Order]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:UniqueConstraint
			key=~uniqueConstraint
			name="UniqueConstraint"
		>
			<TraitRules>
				<RequiresTrait name="trait" />
				<RequiresTrait name="scope" />
			</TraitRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:OrderConstraint
			key=~orderConstraint
			name="OrderConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~orderConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<RequiresTrait name="byTrait" />
			</TraitRules>
			<ChildRules>
				<ExactlyOneChildOf>
					<ConceptOption conceptSelector="ChildPath" />
					<ConceptOption conceptSelector="DescendantPath" />
				</ExactlyOneChildOf>
			</ChildRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Uniqueness and Order]

		[GROUP: Atomic Constraints - Reference]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ReferenceConstraint
			key=~referenceConstraint
			name="ReferenceConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~referenceConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<AllowsTrait name="conceptSelector" />
				<AllowsTrait name="traitName" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Reference]

		[GROUP: Atomic Constraints - Identity]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:IdentityConstraint
			key=~identityConstraint
			name="IdentityConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~identityConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<AllowsTrait name="scope" />
				<AllowsTrait name="pattern" />
				<AllowsTrait name="flags" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Identity]

		[GROUP: Atomic Constraints - Context]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ContextConstraint
			key=~contextConstraint
			name="ContextConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~contextConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<AllowsTrait name="contextSelector" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Context]

		[GROUP: Atomic Constraints - Content]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:ContentConstraint
			key=~contentConstraint
			name="ContentConstraint"
		>
			<TraitRules>
				<RequiresTrait name="type">
					<AllowedValues>
						<EnumeratedConstraint set=~contentConstraintType />
					</AllowedValues>
				</RequiresTrait>
				<AllowsTrait name="pattern" />
				<AllowsTrait name="flags" />
			</TraitRules>
		</ConceptDefinition>

		[END: Atomic Constraints - Content]

		[GROUP: Canonical Representation - RDF Graph]

		<ConceptDefinition
			conceptKind=$Structural
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:RdfGraph
			key=~rdfGraph
			name="RdfGraph"
		>
			<ChildRules>
				<RequiresChildConcept conceptSelector="RdfTriple" min=1 />
			</ChildRules>
		</ConceptDefinition>

		<ConceptDefinition
			conceptKind=$ValueLike
			entityEligibility=$MustNotBeEntity
			id=urn:codex:bootstrap:concept:RdfTriple
			key=~rdfTriple
			name="RdfTriple"
		>
			<TraitRules>
				<RequiresTrait name="subject" />
				<RequiresTrait name="predicate" />
				<AllowsTrait name="object" />
				<AllowsTrait name="lexical" />
				<AllowsTrait name="datatype" />
				<AllowsTrait name="language" />
			</TraitRules>
		</ConceptDefinition>

		[END: Canonical Representation - RDF Graph]

	</ConceptDefinitions>

	<TraitDefinitions>

		[GROUP: Common Traits]

		<TraitDefinition
			defaultValueType=$IriReference
			id=urn:codex:bootstrap:trait:id
			isReferenceTrait=false
			name="id"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$LookupToken
			id=urn:codex:bootstrap:trait:key
			isReferenceTrait=false
			name="key"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:name
			name="name"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:title
			name="title"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:description
			name="description"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:version
			name="version"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:label
			name="label"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:value
			name="value"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$List
			id=urn:codex:bootstrap:trait:values
			name="values"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:message
			name="message"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueTypes=[$Text, $List<$Text>]
			id=urn:codex:bootstrap:trait:role
			name="role"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueTypes=[$Text, $List<$Text>]
			id=urn:codex:bootstrap:trait:tag
			name="tag"
			priority=$Secondary
		/>

		[END: Common Traits]

		[GROUP: Schema Traits]

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:versionScheme
			name="versionScheme"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~versionScheme />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:compatibilityClass
			name="compatibilityClass"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~compatibilityClass />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:authoringMode
			name="authoringMode"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~authoringMode />
			</AllowedValues>
		</TraitDefinition>

		[END: Schema Traits]

		[GROUP: Content Traits]

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:whitespaceMode
			name="whitespaceMode"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~whitespaceMode />
			</AllowedValues>
		</TraitDefinition>

		[END: Content Traits]

		[GROUP: Reference Traits]

		<TraitDefinition
			defaultValueTypes=[$IriReference, $LookupToken]
			id=urn:codex:bootstrap:trait:reference
			isReferenceTrait=true
			name="reference"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueTypes=[$IriReference, $LookupToken]
			id=urn:codex:bootstrap:trait:target
			isReferenceTrait=true
			name="target"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueTypes=[$IriReference, $LookupToken]
			id=urn:codex:bootstrap:trait:for
			isReferenceTrait=true
			name="for"
			priority=$Primary
		/>

		[END: Reference Traits]

		[GROUP: Concept Definition Traits]

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:conceptKind
			name="conceptKind"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~conceptKind />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:entityEligibility
			name="entityEligibility"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~entityEligibility />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:conceptSelector
			name="conceptSelector"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:contextSelector
			name="contextSelector"
			priority=$Primary
		/>

		[END: Concept Definition Traits]

		[GROUP: Trait Definition Traits]

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:defaultValueType
			name="defaultValueType"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~valueType />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$List<$EnumeratedToken>
			id=urn:codex:bootstrap:trait:defaultValueTypes
			name="defaultValueTypes"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Boolean
			id=urn:codex:bootstrap:trait:isReferenceTrait
			name="isReferenceTrait"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:priority
			name="priority"
			priority=$Secondary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~traitPriority />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:baseValueType
			name="baseValueType"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~valueType />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:validatorName
			name="validatorName"
			priority=$Primary
		/>

		[END: Trait Definition Traits]

		[GROUP: Child Rule Traits]

		<TraitDefinition
			defaultValueType=$Number
			id=urn:codex:bootstrap:trait:min
			name="min"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Number
			id=urn:codex:bootstrap:trait:max
			name="max"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$NonNegativeInteger
			id=urn:codex:bootstrap:trait:minCount
			name="minCount"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$PositiveInteger
			id=urn:codex:bootstrap:trait:maxCount
			name="maxCount"
			priority=$Secondary
		/>

		[END: Child Rule Traits]

		[GROUP: Collection Rule Traits]

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:ordering
			name="ordering"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~ordering />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$Boolean
			id=urn:codex:bootstrap:trait:allowsDuplicates
			name="allowsDuplicates"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Boolean
			id=urn:codex:bootstrap:trait:allowed
			name="allowed"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:keyTrait
			name="keyTrait"
			priority=$Secondary
		/>

		[END: Collection Rule Traits]

		[GROUP: Constraint Traits]

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:trait
			name="trait"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:traitName
			name="traitName"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:byTrait
			name="byTrait"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:valueType
			name="valueType"
			priority=$Primary
		>
			<AllowedValues>
				<EnumeratedConstraint set=~valueType />
			</AllowedValues>
		</TraitDefinition>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:pattern
			name="pattern"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:flags
			name="flags"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:scope
			name="scope"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$LookupToken
			id=urn:codex:bootstrap:trait:set
			name="set"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$EnumeratedToken
			id=urn:codex:bootstrap:trait:type
			name="type"
			priority=$Primary
		/>

		[END: Constraint Traits]

		[GROUP: RDF Triple Traits]

		<TraitDefinition
			defaultValueType=$IriReference
			id=urn:codex:bootstrap:trait:subject
			name="subject"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$IriReference
			id=urn:codex:bootstrap:trait:predicate
			name="predicate"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$IriReference
			id=urn:codex:bootstrap:trait:object
			name="object"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:lexical
			name="lexical"
			priority=$Primary
		/>

		<TraitDefinition
			defaultValueType=$IriReference
			id=urn:codex:bootstrap:trait:datatype
			name="datatype"
			priority=$Secondary
		/>

		<TraitDefinition
			defaultValueType=$Text
			id=urn:codex:bootstrap:trait:language
			name="language"
			priority=$Secondary
		/>

		[END: RDF Triple Traits]

	</TraitDefinitions>

	<ConstraintDefinitions>

		[GROUP: Schema Structural Constraints]

		<ConstraintDefinition
			description="A simplified-mode schema must define at least one concept."
			id=urn:codex:bootstrap:constraint:profile-a-requires-concept-definitions
			title="Simplified mode schemas must have ConceptDefinitions"
		>
			<Targets>
				<TargetConcept conceptSelector="Schema" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="authoringMode" value=$SimplifiedMode />
					</When>
					<Then>
						<ChildConstraint conceptSelector="ConceptDefinitions" type=$RequiresChildConcept />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: Schema Structural Constraints]

		[GROUP: TraitDefinition Value Type Constraints]

		<ConstraintDefinition
			description="A TraitDefinition must have either defaultValueType or defaultValueTypes, but not both."
			id=urn:codex:bootstrap:constraint:trait-definition-value-type
			title="TraitDefinition requires value type"
		>
			<Targets>
				<TargetConcept conceptSelector="TraitDefinition" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<AllOf>
							<Rule>
								<TraitExists trait="defaultValueType" />
							</Rule>
							<Rule>
								<TraitMissing trait="defaultValueTypes" />
							</Rule>
						</AllOf>
					</Rule>
					<Rule>
						<AllOf>
							<Rule>
								<TraitExists trait="defaultValueTypes" />
							</Rule>
							<Rule>
								<TraitMissing trait="defaultValueType" />
							</Rule>
						</AllOf>
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		[END: TraitDefinition Value Type Constraints]

		[GROUP: RdfTriple Object Constraints]

		<ConstraintDefinition
			description="An RdfTriple must have either object (IRI) or lexical (literal lexical form), but not both."
			id=urn:codex:bootstrap:constraint:rdf-triple-object
			title="RdfTriple requires object"
		>
			<Targets>
				<TargetConcept conceptSelector="RdfTriple" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<AllOf>
							<Rule>
								<TraitExists trait="object" />
							</Rule>
							<Rule>
								<TraitMissing trait="lexical" />
							</Rule>
						</AllOf>
					</Rule>
					<Rule>
						<AllOf>
							<Rule>
								<TraitExists trait="lexical" />
							</Rule>
							<Rule>
								<TraitMissing trait="object" />
							</Rule>
						</AllOf>
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="If language is present, datatype must be absent."
			id=urn:codex:bootstrap:constraint:rdf-triple-language-excludes-datatype
			title="RdfTriple language excludes datatype"
		>
			<Targets>
				<TargetConcept conceptSelector="RdfTriple" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitExists trait="language" />
					</When>
					<Then>
						<TraitMissing trait="datatype" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: RdfTriple Object Constraints]

		[GROUP: Cardinality Constraint Bounds]

		<ConstraintDefinition
			description="ValueLength must have min or max (or both)."
			id=urn:codex:bootstrap:constraint:value-length-requires-bound
			title="ValueLength requires at least one bound"
		>
			<Targets>
				<TargetConcept conceptSelector="ValueLength" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<TraitExists trait="min" />
					</Rule>
					<Rule>
						<TraitExists trait="max" />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="ValueInNumericRange must have min or max (or both)."
			id=urn:codex:bootstrap:constraint:value-in-numeric-range-requires-bound
			title="ValueInNumericRange requires at least one bound"
		>
			<Targets>
				<TargetConcept conceptSelector="ValueInNumericRange" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<TraitExists trait="min" />
					</Rule>
					<Rule>
						<TraitExists trait="max" />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="TraitCardinality must have min or max (or both)."
			id=urn:codex:bootstrap:constraint:trait-cardinality-requires-bound
			title="TraitCardinality requires at least one bound"
		>
			<Targets>
				<TargetConcept conceptSelector="TraitCardinality" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<TraitExists trait="min" />
					</Rule>
					<Rule>
						<TraitExists trait="max" />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="MemberCount must have min or max (or both)."
			id=urn:codex:bootstrap:constraint:member-count-requires-bound
			title="MemberCount requires at least one bound"
		>
			<Targets>
				<TargetConcept conceptSelector="MemberCount" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<TraitExists trait="min" />
					</Rule>
					<Rule>
						<TraitExists trait="max" />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="OnPathCount must have minCount or maxCount (or both)."
			id=urn:codex:bootstrap:constraint:on-path-count-requires-bound
			title="OnPathCount requires at least one bound"
		>
			<Targets>
				<TargetConcept conceptSelector="OnPathCount" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<TraitExists trait="minCount" />
					</Rule>
					<Rule>
						<TraitExists trait="maxCount" />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		[END: Cardinality Constraint Bounds]

		[GROUP: Collection Duplicate Constraints]

		<ConstraintDefinition
			description="When allowed=false, keyTrait must be specified to determine uniqueness."
			id=urn:codex:bootstrap:constraint:duplicates-false-requires-key-trait
			title="Disallowing duplicates requires keyTrait"
		>
			<Targets>
				<TargetConcept conceptSelector="CollectionAllowsDuplicates" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="allowed" value=false />
					</When>
					<Then>
						<TraitExists trait="keyTrait" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: Collection Duplicate Constraints]

		[GROUP: RequiresChildConcept Constraints]

		<ConstraintDefinition
			description="When min is specified on RequiresChildConcept, it must be at least 1."
			id=urn:codex:bootstrap:constraint:requires-child-concept-min-positive
			title="RequiresChildConcept min must be positive"
		>
			<Targets>
				<TargetConcept conceptSelector="RequiresChildConcept" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitExists trait="min" />
					</When>
					<Then>
						<OnPathExists>
							<TraitPath traitName="min" />
							<Rule>
								<ValueInNumericRange min=1 />
							</Rule>
						</OnPathExists>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: RequiresChildConcept Constraints]

		[GROUP: IdentityConstraint Constraints]

		<ConstraintDefinition
			description="When IdentityConstraint.type is IdentifierForm, the pattern trait must be present."
			id=urn:codex:bootstrap:constraint:identity-constraint-identifier-form-requires-pattern
			title="IdentifierForm requires pattern"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$IdentifierForm />
					</When>
					<Then>
						<TraitExists trait="pattern" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When IdentityConstraint.type is IdentifierForm, scope must be absent."
			id=urn:codex:bootstrap:constraint:identity-constraint-identifier-form-forbids-scope
			title="IdentifierForm forbids scope"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$IdentifierForm />
					</When>
					<Then>
						<TraitMissing trait="scope" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When IdentityConstraint.type is IdentifierUniqueness, scope must be present to define the uniqueness boundary."
			id=urn:codex:bootstrap:constraint:identity-constraint-identifier-uniqueness-requires-scope
			title="IdentifierUniqueness requires scope"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$IdentifierUniqueness />
					</When>
					<Then>
						<TraitExists trait="scope" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When IdentityConstraint.type is IdentifierUniqueness, pattern and flags must be absent."
			id=urn:codex:bootstrap:constraint:identity-constraint-identifier-uniqueness-forbids-pattern
			title="IdentifierUniqueness forbids pattern/flags"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$IdentifierUniqueness />
					</When>
					<Then>
						<AllOf>
							<Rule>
								<TraitMissing trait="pattern" />
							</Rule>
							<Rule>
								<TraitMissing trait="flags" />
							</Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When IdentityConstraint.type is MustBeEntity, scope/pattern/flags must be absent."
			id=urn:codex:bootstrap:constraint:identity-constraint-must-be-entity-forbids-params
			title="MustBeEntity forbids extra params"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$MustBeEntity />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="scope" /></Rule>
							<Rule><TraitMissing trait="pattern" /></Rule>
							<Rule><TraitMissing trait="flags" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When IdentityConstraint.type is MustNotBeEntity, scope/pattern/flags must be absent."
			id=urn:codex:bootstrap:constraint:identity-constraint-must-not-be-entity-forbids-params
			title="MustNotBeEntity forbids extra params"
		>
			<Targets>
				<TargetConcept conceptSelector="IdentityConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$MustNotBeEntity />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="scope" /></Rule>
							<Rule><TraitMissing trait="pattern" /></Rule>
							<Rule><TraitMissing trait="flags" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: IdentityConstraint Constraints]

		[GROUP: ReferenceConstraint Parameter Requirements]

		<ConstraintDefinition
			description="When ReferenceConstraint.type is ReferenceTargetsConcept, conceptSelector must be present."
			id=urn:codex:bootstrap:constraint:reference-targets-concept-requires-selector
			title="ReferenceTargetsConcept requires conceptSelector"
		>
			<Targets>
				<TargetConcept conceptSelector="ReferenceConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ReferenceTargetsConcept />
					</When>
					<Then>
						<TraitExists trait="conceptSelector" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ReferenceConstraint.type is ReferenceTraitAllowed, traitName must be present."
			id=urn:codex:bootstrap:constraint:reference-trait-allowed-requires-traitname
			title="ReferenceTraitAllowed requires traitName"
		>
			<Targets>
				<TargetConcept conceptSelector="ReferenceConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ReferenceTraitAllowed />
					</When>
					<Then>
						<TraitExists trait="traitName" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ReferenceConstraint.type is ReferenceTargetsEntity, conceptSelector and traitName must be absent."
			id=urn:codex:bootstrap:constraint:reference-targets-entity-forbids-params
			title="ReferenceTargetsEntity forbids extra params"
		>
			<Targets>
				<TargetConcept conceptSelector="ReferenceConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ReferenceTargetsEntity />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="conceptSelector" /></Rule>
							<Rule><TraitMissing trait="traitName" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ReferenceConstraint.type is ReferenceMustResolve, conceptSelector and traitName must be absent."
			id=urn:codex:bootstrap:constraint:reference-must-resolve-forbids-params
			title="ReferenceMustResolve forbids extra params"
		>
			<Targets>
				<TargetConcept conceptSelector="ReferenceConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ReferenceMustResolve />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="conceptSelector" /></Rule>
							<Rule><TraitMissing trait="traitName" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ReferenceConstraint.type is ReferenceSingleton, conceptSelector and traitName must be absent."
			id=urn:codex:bootstrap:constraint:reference-singleton-forbids-params
			title="ReferenceSingleton forbids extra params"
		>
			<Targets>
				<TargetConcept conceptSelector="ReferenceConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ReferenceSingleton />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="conceptSelector" /></Rule>
							<Rule><TraitMissing trait="traitName" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: ReferenceConstraint Parameter Requirements]

		[GROUP: Uniqueness Constraints]

		<ConstraintDefinition
			description="Within a schema, each ConceptDefinition must have a unique name."
			id=urn:codex:bootstrap:constraint:concept-definition-name-unique
			title="ConceptDefinition names must be unique"
		>
			<Targets>
				<TargetConcept conceptSelector="ConceptDefinition" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="Schema" trait="name" />
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="Within a schema, each TraitDefinition must have a unique name."
			id=urn:codex:bootstrap:constraint:trait-definition-name-unique
			title="TraitDefinition names must be unique"
		>
			<Targets>
				<TargetConcept conceptSelector="TraitDefinition" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="Schema" trait="name" />
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="Within a schema, each EnumeratedValueSet must have a unique name."
			id=urn:codex:bootstrap:constraint:enumerated-value-set-name-unique
			title="EnumeratedValueSet names must be unique"
		>
			<Targets>
				<TargetConcept conceptSelector="EnumeratedValueSet" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="Schema" trait="name" />
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="Within an EnumeratedValueSet, each Member must have a unique value."
			id=urn:codex:bootstrap:constraint:member-value-unique
			title="Member values must be unique within set"
		>
			<Targets>
				<TargetConcept conceptSelector="Member" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="EnumeratedValueSet" trait="value" />
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="Within a schema, each ValidatorDefinition must have a unique name."
			id=urn:codex:bootstrap:constraint:validator-definition-name-unique
			title="ValidatorDefinition names must be unique"
		>
			<Targets>
				<TargetConcept conceptSelector="ValidatorDefinition" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="Schema" trait="name" />
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="Within a schema, each ValueTypeDefinition must have a unique name."
			id=urn:codex:bootstrap:constraint:value-type-definition-name-unique
			title="ValueTypeDefinition names must be unique"
		>
			<Targets>
				<TargetConcept conceptSelector="ValueTypeDefinition" />
			</Targets>
			<Rule>
				<UniqueConstraint scope="Schema" trait="name" />
			</Rule>
		</ConstraintDefinition>

		[END: Uniqueness Constraints]

		[GROUP: Mode Constraints]

		<ConstraintDefinition
			description="When authoringMode is SimplifiedMode, the schema must not contain an RdfGraph."
			id=urn:codex:bootstrap:constraint:profile-a-no-rdf-graph
			title="Simplified mode schemas must not contain RdfGraph"
		>
			<Targets>
				<TargetConcept conceptSelector="Schema" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="authoringMode" value=$SimplifiedMode />
					</When>
					<Then>
						<ChildConstraint conceptSelector="RdfGraph" type=$ForbidsChildConcept />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When authoringMode is CanonicalMode, the schema must contain exactly one RdfGraph."
			id=urn:codex:bootstrap:constraint:profile-b-requires-rdf-graph
			title="Canonical mode schemas must contain RdfGraph"
		>
			<Targets>
				<TargetConcept conceptSelector="Schema" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="authoringMode" value=$CanonicalMode />
					</When>
					<Then>
						<ChildConstraint conceptSelector="RdfGraph" type=$RequiresChildConcept />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When authoringMode is CanonicalMode, the schema must not contain ConceptDefinitions, TraitDefinitions, EnumeratedValueSets, ConstraintDefinitions, ValueTypeDefinitions, or ValidatorDefinitions."
			id=urn:codex:bootstrap:constraint:profile-b-forbids-schema-definition-containers
			title="Canonical mode schemas must not contain Codex-native schema-definition containers"
		>
			<Targets>
				<TargetConcept conceptSelector="Schema" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="authoringMode" value=$CanonicalMode />
					</When>
					<Then>
						<AllOf>
							<Rule>
								<ChildConstraint conceptSelector="ConceptDefinitions" type=$ForbidsChildConcept />
							</Rule>
							<Rule>
								<ChildConstraint conceptSelector="TraitDefinitions" type=$ForbidsChildConcept />
							</Rule>
							<Rule>
								<ChildConstraint conceptSelector="EnumeratedValueSets" type=$ForbidsChildConcept />
							</Rule>
							<Rule>
								<ChildConstraint conceptSelector="ConstraintDefinitions" type=$ForbidsChildConcept />
							</Rule>
							<Rule>
								<ChildConstraint conceptSelector="ValueTypeDefinitions" type=$ForbidsChildConcept />
							</Rule>
							<Rule>
								<ChildConstraint conceptSelector="ValidatorDefinitions" type=$ForbidsChildConcept />
							</Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: Mode Constraints]

		[GROUP: ContextConstraint Parameter Requirements]

		<ConstraintDefinition
			description="When ContextConstraint.type is OnlyValidUnderContext, contextSelector must be present."
			id=urn:codex:bootstrap:constraint:context-constraint-only-valid-under-context-requires-selector
			title="OnlyValidUnderContext requires contextSelector"
		>
			<Targets>
				<TargetConcept conceptSelector="ContextConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$OnlyValidUnderContext />
					</When>
					<Then>
						<TraitExists trait="contextSelector" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ContextConstraint.type is OnlyValidUnderParent, contextSelector must be absent."
			id=urn:codex:bootstrap:constraint:context-constraint-only-valid-under-parent-forbids-selector
			title="OnlyValidUnderParent forbids contextSelector"
		>
			<Targets>
				<TargetConcept conceptSelector="ContextConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$OnlyValidUnderParent />
					</When>
					<Then>
						<TraitMissing trait="contextSelector" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: ContextConstraint Parameter Requirements]

		[GROUP: ContentConstraint Parameter Requirements]

		<ConstraintDefinition
			description="When ContentConstraint.type is ContentMatchesPattern, pattern must be present."
			id=urn:codex:bootstrap:constraint:content-constraint-matches-pattern-requires-pattern
			title="ContentMatchesPattern requires pattern"
		>
			<Targets>
				<TargetConcept conceptSelector="ContentConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ContentMatchesPattern />
					</When>
					<Then>
						<TraitExists trait="pattern" />
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ContentConstraint.type is ContentRequired, pattern and flags must be absent."
			id=urn:codex:bootstrap:constraint:content-constraint-required-forbids-pattern
			title="ContentRequired forbids pattern"
		>
			<Targets>
				<TargetConcept conceptSelector="ContentConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ContentRequired />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="pattern" /></Rule>
							<Rule><TraitMissing trait="flags" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="When ContentConstraint.type is ForbidsContent, pattern and flags must be absent."
			id=urn:codex:bootstrap:constraint:content-constraint-forbidden-forbids-pattern
			title="ForbidsContent forbids pattern"
		>
			<Targets>
				<TargetConcept conceptSelector="ContentConstraint" />
			</Targets>
			<Rule>
				<ConditionalConstraint>
					<When>
						<TraitEquals trait="type" value=$ForbidsContent />
					</When>
					<Then>
						<AllOf>
							<Rule><TraitMissing trait="pattern" /></Rule>
							<Rule><TraitMissing trait="flags" /></Rule>
						</AllOf>
					</Then>
				</ConditionalConstraint>
			</Rule>
		</ConstraintDefinition>

		[END: ContentConstraint Parameter Requirements]

		[GROUP: Non-Empty Container Constraints]

		<ConstraintDefinition
			description="A TraitRules container must contain at least one RequiresTrait, AllowsTrait, or ForbidsTrait."
			id=urn:codex:bootstrap:constraint:trait-rules-non-empty
			title="TraitRules must have at least one rule"
		>
			<Targets>
				<TargetConcept conceptSelector="TraitRules" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<ChildConstraint conceptSelector="RequiresTrait" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="AllowsTrait" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="ForbidsTrait" type=$RequiresChildConcept />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="A ChildRules container must contain at least one child rule."
			id=urn:codex:bootstrap:constraint:child-rules-non-empty
			title="ChildRules must have at least one rule"
		>
			<Targets>
				<TargetConcept conceptSelector="ChildRules" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<ChildConstraint conceptSelector="AllowsChildConcept" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="RequiresChildConcept" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="ForbidsChildConcept" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="ExactlyOneChildOf" type=$RequiresChildConcept />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		<ConstraintDefinition
			description="A Targets container must contain at least one TargetConcept or TargetContext."
			id=urn:codex:bootstrap:constraint:targets-non-empty
			title="Targets must have at least one target"
		>
			<Targets>
				<TargetConcept conceptSelector="Targets" />
			</Targets>
			<Rule>
				<AnyOf>
					<Rule>
						<ChildConstraint conceptSelector="TargetConcept" type=$RequiresChildConcept />
					</Rule>
					<Rule>
						<ChildConstraint conceptSelector="TargetContext" type=$RequiresChildConcept />
					</Rule>
				</AnyOf>
			</Rule>
		</ConstraintDefinition>

		[END: Non-Empty Container Constraints]

	</ConstraintDefinitions>
</Schema>
