# Codex Provenance Contract (DRAFT)

## Status

- **DRAFT**
- Normative once locked
- Applies to all Codex schemas and documents that declare provenance information

---

## 1. Purpose

This contract defines **provenance in Codex**.

Its goals are to:

- record authorship and derivation **declaratively**
- make origin and lineage inspectable and queryable
- avoid executable, procedural, or workflow semantics
- keep provenance orthogonal to domain meaning

This contract governs **what provenance is and how it is named**, not how tools generate it.

---

## 2. What Provenance Is

**Provenance** describes the **origin, authorship, and derivation** of Codex Concepts, Entities, and Annotations.

Provenance:

- is **descriptive**, not prescriptive
- does **not** imply trust, correctness, or authority
- does **not** affect domain semantics
- is intended for inspection, auditing, and tooling

Provenance never changes the meaning of the Concept or Annotation it describes.

---

## 3. Provenance Context (Normative)

Provenance is expressed **only within a provenance context** defined by schema.

In the Codex module-assembly schema, provenance is carried inside a structural Concept named:

- `Provenance`

Outside that context, provenance Concepts have no special meaning unless defined by another schema.

---

## 4. Provenance Scope

Provenance MAY apply to:

- an entire `Module`
- a specific Entity within a Module
- a derived Concept or plan
- an **Annotation** (editorial or output)

Schemas MUST define which Concepts and Annotations may carry provenance.

Provenance MUST NOT be attached implicitly.

---

## 5. Provenance Concepts (Module Context)

Within the Codex module-assembly context, the following **Structural Concepts** are defined for provenance:

- `Provenance`
- `AuthoredBy`
- `GeneratedBy`
- `DerivedFrom`

These names are **contextual** and have meaning only within the module provenance context.

---

## 6. Authorship

### `AuthoredBy`

`AuthoredBy` declares the author or responsible agent.

- Its purpose is attribution, not permission
- It MAY reference a human, organization, or agent Entity
- Multiple authors MAY be declared
- It MAY apply to Concepts **or Annotations**

Plain English reading:

> “This was authored by X.”

---

## 7. Generation

### `GeneratedBy`

`GeneratedBy` declares the tool or agent that generated a Concept or Annotation.

- It is declarative
- It does not imply determinism or reproducibility
- It does not imply endorsement or correctness
- It MAY distinguish between human-authored and machine-generated annotations

Plain English reading:

> “This was generated by X.”

---

## 8. Derivation

### `DerivedFrom`

`DerivedFrom` declares lineage.

- It references another Entity or Annotation
- It asserts derivation, not equivalence
- It does not encode transformation steps

Plain English reading:

> “This was derived from X.”

---

## 9. Annotations and Provenance (Normative)

Annotations are **first-class artifacts** for the purposes of provenance.

- Editorial annotations (`[ ... ]`)
- Output annotations (`<Annotation>`)

MAY carry provenance metadata.

Provenance attached to annotations:

- describes **who authored or generated the annotation**
- may describe **derivation** (e.g. copied, summarized, translated)
- does **not** affect the meaning of the annotated Concept

Annotations MUST NOT inherit provenance implicitly from the Concepts they annotate unless schema explicitly defines such inheritance.

---

## 10. Reference Semantics

Provenance Concepts use **reference Traits** to identify Entities or Annotations.

- References MUST point to valid Entities or Annotations
- Provenance references MUST NOT form cycles unless explicitly allowed by schema
- The reference singleton rule applies unless schema permits otherwise

---

## 11. Identity Rules

By default:

- Provenance Concepts are **not Entities**
- Provenance Concepts MUST NOT declare an `id`

Exceptions:

- A schema MAY explicitly authorize identity for a provenance Concept
- Such authorization MUST be documented

Absent explicit authorization, assigning an `id` to a provenance Concept is a validation error.

---

## 12. Ordering

If multiple provenance entries appear:

- lexical order is preserved
- order has **no semantic meaning** unless schema explicitly defines one

---

## 13. Non-Goals

This contract does **not**:

- define trust models
- define access control or authorization
- define workflow or pipeline semantics
- encode execution history
- replace external provenance standards

It defines **Codex-native provenance only**.

---

## 14. Summary

- Provenance in Codex is declarative and descriptive
- It records authorship, generation, and derivation
- It may apply to Concepts **and Annotations**
- It never alters domain semantics
- Its meaning is contextual and schema-defined
- Provenance is inspectable, not executable
